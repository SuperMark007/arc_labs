

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to use ARC IDE &mdash; ARC Labs 2018.09 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="How to use embARC OSP" href="lab2.html" />
    <link rel="prev" title="Level 1 Labs" href="../level1.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> ARC Labs
          

          
          </a>

          
            
            
              <div class="version">
                2018.09
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introduction.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../labs.html">Labs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../labs.html#overview">Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../labs.html#id2">Labs</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../level1.html">Level 1 Labs</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">How to use ARC IDE</a></li>
<li class="toctree-l4"><a class="reference internal" href="lab2.html">How to use embARC OSP</a></li>
<li class="toctree-l4"><a class="reference internal" href="lab3.html">ARC features: timer and auxiliary registers</a></li>
<li class="toctree-l4"><a class="reference internal" href="lab4.html">ARC features: interrupts</a></li>
<li class="toctree-l4"><a class="reference internal" href="lab5.html">How to use ARC board</a></li>
<li class="toctree-l4"><a class="reference internal" href="lab6.html">A simple bootloader</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../level2.html">Level 2 Labs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../level3.html">Level 3 Labs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/appendix.html">Appendix</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ARC Labs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../labs.html">Labs</a> &raquo;</li>
        
          <li><a href="../level1.html">Level 1 Labs</a> &raquo;</li>
        
      <li>How to use ARC IDE</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/labs/level1/lab1.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-use-arc-ide">
<span id="lab1"></span><h1>How to use ARC IDE<a class="headerlink" href="#how-to-use-arc-ide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="metaware-toolkit">
<h2>MetaWare ToolKit<a class="headerlink" href="#metaware-toolkit" title="Permalink to this headline">¶</a></h2>
<div class="section" id="purpose">
<h3>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>To learn the MetaWare Development Toolkit</li>
<li>To get familiar with the basic useage of the MetaWare Development Toolkit</li>
<li>To get familiar with the features and usage of the MetaWare Debugger (mdb)</li>
</ul>
</div>
<div class="section" id="equipment">
<h3>Equipment<a class="headerlink" href="#equipment" title="Permalink to this headline">¶</a></h3>
<p>The following hardware and software tools are required:</p>
<ul class="simple">
<li>PC host</li>
<li>MetaWare Development Toolkit</li>
<li>nSIM simulator or ARC board (EM Starter Kit / IoT Development Kit)</li>
<li><code class="docutils literal notranslate"><span class="pre">embarc_osp/arc_labs/labs/lab1_core_test</span></code></li>
</ul>
</div>
<div class="section" id="content">
<h3>Content<a class="headerlink" href="#content" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Create a C project using the MetaWare Development Toolkit</li>
<li>Import the code <code class="docutils literal notranslate"><span class="pre">CoreTest.c</span></code></li>
<li>Configure compilation options to compile, and generate executable files.</li>
<li>Start the debugger of MetaWare Development Toolkit and enter debug mode.</li>
</ul>
<p>From the different angles of C language and assembly language, use the functions of setting breakpoint, single step execution, full speed execution, etc., combined with observing PC address, register status, global variable status and Profiling performance to analyze the debug target program.</p>
</div>
<div class="section" id="principles">
<h3>Principles<a class="headerlink" href="#principles" title="Permalink to this headline">¶</a></h3>
<p>Use the MetaWare Development Toolkit to create projects and load code. In the engineering unit, configure the compile option to compilation code, debug and analyze the compiled executable file.</p>
<p>Routine code CoreTest.c:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">/////////////////////////////////////////////////////////////////////////</span>
<span class="c1">// This small demo program finds the data point that is the</span>
<span class="c1">// minimal distance from x and y [here arbitrarily defined to be (4,5)]</span>
<span class="c1">//</span>
<span class="c1">// #define/undefine &#39;_DEBUG&#39; precompiler variable to obtain</span>
<span class="c1">// desired functionality. Including _DEBUG will bring in the</span>
<span class="c1">// I/O library to print results of the search.</span>
<span class="c1">//</span>
<span class="c1">// For purposes of simplicity, the data points used in the computations</span>
<span class="c1">// are hardcoded into the POINTX and POINTY constant values below</span>
<span class="c1">/////////////////////////////////////////////////////////////////////////</span>


<span class="cp">#ifdef _DEBUG</span>
<span class="cp">#include</span> <span class="cpf">&quot;stdio.h&quot;</span><span class="cp"></span>
<span class="cp">#endif</span>

<span class="cp">#define POINTX {1, 2, 3, 4,  5,  6,  7,  8,  9, 10}</span>
<span class="cp">#define POINTY {2, 4, 6, 8, 10, 12, 14, 16, 18, 20}</span>
<span class="cp">#define POINTS 10</span>

<span class="cp">#define GetError(x, y, Px, Py) \</span>
<span class="cp">    ( (x-Px)*(x-Px) + (y-Py)*(y-Py) )</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">pPointX</span><span class="p">[]</span> <span class="o">=</span> <span class="n">POINTX</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">pPointY</span><span class="p">[]</span> <span class="o">=</span> <span class="n">POINTY</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">minindex</span><span class="p">,</span> <span class="n">minerror</span><span class="p">;</span>

    <span class="n">x</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

    <span class="n">minerror</span> <span class="o">=</span> <span class="n">GetError</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">pPointX</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pPointY</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="n">minindex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">POINTS</span><span class="p">;</span> <span class="n">index</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">error</span> <span class="o">=</span> <span class="n">GetError</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">pPointX</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">pPointY</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">&lt;</span> <span class="n">minerror</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">minerror</span> <span class="o">=</span> <span class="n">error</span><span class="p">;</span>
                    <span class="n">minindex</span> <span class="o">=</span> <span class="n">index</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

<span class="cp">#ifdef _DEBUG</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;minindex = %d, minerror = %d.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">minindex</span><span class="p">,</span> <span class="n">minerror</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;The point is (%d, %d).</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">pPointX</span><span class="p">[</span><span class="n">minindex</span><span class="p">],</span> <span class="n">pPointY</span><span class="p">[</span><span class="n">minindex</span><span class="p">]);</span>
    <span class="n">getchar</span><span class="p">();</span>
<span class="cp">#endif</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="steps">
<h3>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Establishing a project</li>
</ol>
<p>Open the MetaWare Development Toolkit, create an empty project called <code class="docutils literal notranslate"><span class="pre">demo</span></code>, and select the ARC EM series processor, as shown below (figure 1).</p>
<p><img alt="figure1" src="../../_images/lab1_figure1.png" /></p>
<ol class="arabic simple" start="2">
<li>Import the code file CoreTest.c to the project <code class="docutils literal notranslate"><span class="pre">demo</span></code>.</li>
</ol>
<p>In the Project Explorer on the left side of the MetaWare Development Toolkit main interface, click
the icon <img alt="icon1" src="../../_images/lab1_icon1.png" /> and select Import from the pop-up menu.</p>
<p>At this point, a dialog called Import appears, select the File System item in the General tab, and then click next. As shown in the figure below, add the file directory where the source code CoreTest.c is located. The dialog box will automatically display the name of the directory and the file name of the file contained in the directory. Select the file to be added, CoreTest.c, and click Finish to complete the entire import process (figure 2).</p>
<p><img alt="figure2" src="../../_images/lab1_figure2.png" /></p>
<p>After the import is complete, you can see the code file <code class="docutils literal notranslate"><span class="pre">CoreTest.c</span></code> you just added in the Project Explorer on the left side of the MetaWare Development Toolkit main interface.</p>
<ol class="arabic simple" start="3">
<li>Set compilation options</li>
</ol>
<p>Right click on the current project demo and select Properties in the popup
tab. Click C/C++ Build, settings, Tool Settings to open the compile option
settings page, as shown below (figure 3).</p>
<p><img alt="figure3" src="../../_images/lab1_figure3.png" /></p>
<p>In current pespective , select Optimization/Debugging to set the compiler
optimization and debugging level. For example, set the optimization level to
turn off optimization, and set the debugging level to load all debugging
information.</p>
<p>Select Processor/Extensions on the current interface to set the compiler
options to match the target processor hardware properties, such as processor
versions, extended instructions supporting shift, multiplication, floating-point
operations, etc. and Timer0/1 extension in the core. Figure below indicates
that this target processor supports normal extended instructions (figure 4).</p>
<p><img alt="figure4" src="../../_images/lab1_figure4.png" /></p>
<p>Finally select MetaWare ARC EM C/C++ and check the compiler/assembler and
linker options in the All options column on the right. Then click OK to
close the Properties dialog.</p>
<ol class="arabic simple" start="4">
<li>Compile project demo</li>
</ol>
<p>Select Build Project from the Project drop-down menu in the MetaWare Development Toolkit main menu
or click the icon <img alt="icon2" src="../../_images/lab1_icon2.png" /> . In the middle of the MetaWare Development Toolkit main interface, select
the Console tab to view the logs during compilation. When the message
‘Finished building target: demo.elf’ appears, the compilation is successful,
and the compiled executable file demo.elf can be seen in the Project Explorer
on the left side of the MetaWare Development Toolkit main interface, as shown in the following
figure (figure 5).</p>
<p><img alt="figure5" src="../../_images/lab1_figure5.png" /></p>
<ol class="arabic simple" start="5">
<li>Set debug options</li>
</ol>
<p>Select Debug Configurations from the Run drop-down menu in the MetaWare Development Toolkit main
menu. Then double-click on C/C++ Application or click on New icon to navigate
to a dialog similar to the one below (figure 6).</p>
<p><img alt="figure6" src="../../_images/lab1_figure6.png" /></p>
<p>Click Debugger tab on the right, generally no changes are needed, proceed to check the contents of the Debugger Options and click Debug to enter the debugging interface.</p>
<ol class="arabic simple" start="6">
<li>Debug executable file demo.elf</li>
</ol>
<p>First, select the needed debug window from the drop-down menu of Debugger icon in the
toolbar of the debugger pespective, such as source code window, assembly code
window, register window, global variable window, breakpoint window, function
window, etc., as shown in the following figure (figure 7).</p>
<p><img alt="figure7" src="../../_images/lab1_figure7.png" /></p>
<p>In the C source code window, right-click the code line number on the left side of the
window, select Toggle Breakpoint in the pop-up menu or double-click the line
number to set a breakpoint on the current line. In the assembly code window,
double-click a line of code to set a breakpoint on the current line.</p>
<p>Once the breakpoint is set, click the icon <img alt="icon3" src="../../_images/lab1_icon3.png" /> to run the program. After
that, the program will run directly to the nearest breakpoint. At this point,
you can observe the current program execution and the relevant status
information of the processor through the various windows called in the
previous step. If you want to know more about the details of program execution
and the instruction behavior of the processor, you can use the following three
execution commands <img alt="icon4" src="../../_images/lab1_icon4.png" /> to perform single-step debugging. The icon <img alt="icon5" src="../../_images/lab1_icon5.png" />
can choose to step through a C language statement or an assembly instruction
to match the status information of each window. It’s very convenient for
program debugging. If you want to end the current debugging process, click the
icon <img alt="icon6" src="../../_images/lab1_icon6.png" /> . And if you want to return to the main MetaWare Development Toolkit page, click C/C++
in the upper right corner icon <img alt="icon7" src="../../_images/lab1_icon7.png" /> .</p>
<ol class="arabic simple" start="7">
<li>Code performance analysis using the debugger</li>
</ol>
<p>Based on the previous project demo, open the Compile Options dialog in step 3
and set the Optimization Level to -O0 in the Optimization/Debugging column.
Then click <img alt="icon8" src="../../_images/lab1_icon8.png" /> to recompile the project, then click <img alt="icon9" src="../../_images/lab1_icon9.png" /> to enter the
debugging interface. Click Debugger in the main menu of the debugging
interface, select Disassembly in the pop-up drop-down menu, open the
disassembly code window, and you can see that the program is paused at the
entrance of the main() function. In the same way, select Profiling in the
Debugger drop-down menu, open the performance analysis window and click the
icon <img alt="icon10" src="../../_images/lab1_icon10.png" /> in the window, as shown below (figure 8).</p>
<p><img alt="figure8" src="../../_images/lab1_figure8.png" /></p>
<p>The Profiling window displays the number of executed
instructions of the program with each function in current debug window.
From left to right, the total number of executions of function instructions in
the total number of executions of the entire program instruction, the total
number of executions of the accumulated instructions, the total number of
executions of the functions, the number of times the function is called, the
number of including functions, the address of the function, and the name of
the function. Through the relationship between the instruction information and
the function in the Profiling window, it is very convenient to analyze the
program efficiency and find the shortcoming of the program performance.</p>
<p>Let’s take this project as an example to continue our introducion for the use of the
Profiling window. At this point, the program is paused at the entrance of the
main() function and the Profiling window opens as shown above. The main()
function is the primary object of performance analysis optimization. At this
time, the content displayed in the Profiling window is actually some function
information initialized by the processor before the main() function is
executed. Click the icon <img alt="icon11" src="../../_images/lab1_icon11.png" /> in the Profiling window to clear the current
information. If you click the icon <img alt="icon12" src="../../_images/lab1_icon12.png" /> again, nothing will be displayed,
And it indicate that the cleaning is successful. Then, set a breakpoint at the
last statement of the main() function (either C statement or assembly
statement), and click the icon <img alt="icon13" src="../../_images/lab1_icon13.png" /> in the toolbar above the debug
interface to let the program execute to the breakpoint. Next, click on the
icon <img alt="icon14" src="../../_images/lab1_icon14.png" /> in the Profiling window again, and only the information related
to the main() function will be displayed, as shown below. Therefore, flexible
setting of breakpoints, combined with the clear function, can perform
performance analysis on the concerned blocks (figure 9).</p>
<p><img alt="figure9" src="../../_images/lab1_figure9.png" /></p>
<p>It can be seen that the multiplication library function _mw_mpy_32x32y32 in
the main() function is called 20 times, and a total of 2064 instructions are
executed, while the main() function itself executes only 326 instructions, and
the memcpy function executes 86 instructions.It can be seen that the
implementation of the multiplication function of the program consumes a large
number of instructions, and a large number of instructions means that the
processor will spend  many computation cycles to perform multiplication
operations. Therefore, multiplication is the hotspot for the example program.
So to get better performance, first step to consider is how you can use
fewer instructions and implement multiplication more efficiently.</p>
</div>
<div class="section" id="exercises">
<h3>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h3>
<p>How can I implement multiplication more efficiently with fewer instructions? Apply this method to the project demo of the fifth part, analyze it with the debugger’s Profiling function, observe the total number of instructions consumed by the main function, and compare it with the previous Profiling result of Figure 8.</p>
</div>
</div>
<div class="section" id="arcgnu">
<h2>GNU Toolchain for ARC Processors<a class="headerlink" href="#arcgnu" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Purpose<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Learn the GNU Toolchain for ARC Processors</li>
<li>Familiar with the GNU Toolchain for ARC Processors</li>
<li>Familiar with the functions and usage of the GNU Toolchain for ARC Processors debugger</li>
</ul>
</div>
<div class="section" id="id2">
<h3>Equipment<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>The following hardware and software tools are required:</p>
<ul class="simple">
<li>PC host</li>
<li>GNU Toolchain for ARC Processors</li>
<li>nSIM simulator or ARC board (EM Starter Kit / IoT Development Kit)</li>
<li><code class="docutils literal notranslate"><span class="pre">embarc_osp/arc_labs/labs/lab1_core_test</span></code></li>
</ul>
</div>
<div class="section" id="id3">
<h3>Content<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Create a C project using GNU Toolchain for ARC Processors</li>
<li>Import the routine code <code class="docutils literal notranslate"><span class="pre">CoreTest.c</span></code></li>
<li>Configure compilation options to compile, and generate executable files.</li>
<li>Start the GNU Toolchain for ARC Processors debugger to enter the debug mode</li>
</ul>
<p>From the C language and assembly language different perspectives, use set breakpoints, single-step execution, full-speed execution and other functions, combined with observation of PC address, register status, global variable status and Profiling Performance analysis window, analysis of the debug target program.</p>
</div>
<div class="section" id="id4">
<h3>Principles<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Use the GNU Toolchain for ARC Processors integrated development environment to create projects and load routine code. In the engineering unit, configure the compile option compilation routine code to debug and analyze the compiled executable file.</p>
</div>
<div class="section" id="id5">
<h3>Steps<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Establishing a project</li>
</ol>
<p>Open the GNU Toolchain for ARC Processors, create an empty project called core_test, and select the ARC EM series processor, as shown below (figure 10).</p>
<p><img alt="figure10" src="../../_images/lab1_figure10.png" /></p>
<ol class="arabic simple" start="2">
<li>Import the code file CoreTest.c to the project demo</li>
</ol>
<p>Right click on the icon <img alt="icon15" src="../../_images/lab1_icon15.png" /> in the Project Explorer on the left side of
the GNU Toolchain for ARC Processors main interface, then select Import from the popup menu.</p>
<p>At this point, a dialog window called Import appears, select the File System item in
the General tab, and then click next. As shown in the figure below (figure 11),
add the file directory where the source code CoreTest.c is located. The dialog
box will automatically display the name of the directory and the file name of
the file contained in the directory. Select the file to be added, CoreTest.c,
and click Finish to complete the entire import process.</p>
<p><img alt="figure11" src="../../_images/lab1_figure11.png" /></p>
<p>After the import is complete, you can see the code file CoreTest.c that you
just added in the Project Explorer on the left side of the GNU Toolchain for ARC Processors main
interface.</p>
<ol class="arabic simple" start="3">
<li>Set compilation options</li>
</ol>
<p>Right click on the current project core_test and select Properties in the popup tab. Click C/C++ Build, settings, Tool Settings to open the compile option settings page, as shown below (figure 12).</p>
<p><img alt="figure12" src="../../_images/lab1_figure12.png" /></p>
<p>In the current interface, select Debugging to set the compiler optimization
and debugging level. For example, set the optimization level to off
optimization, and the debugging level is to load all debugging information.</p>
<p>Select Processor in the current interface to set the compile options
corresponding to the target processor hardware attributes, such as the version
of the processor, whether to support extended instructions such as shift,
multiplication, floating-point operations, etc., whether to include Timer0/1.</p>
<p>In step 1, we have already built the project using the engineering template of
EMSK, so the corresponding necessary options have been set by default. If
there is no special requirement, check the setting compile options in the All
options column on the right. Then click OK to close the Properties dialog.</p>
<ol class="arabic simple" start="4">
<li>Compile the project core_test**</li>
</ol>
<p>Select Build Project from the Project drop-down menu in the GNU Toolchain for ARC Processors main menu
or click the icon <img alt="icon16" src="../../_images/lab1_icon16.png" /> . In the middle of the GNU Toolchain for ARC Processors main interface,
select the Console tab to view the logs during the compilation process. When
the message ‘Finished building target: Core_test.elf’ appears, the compilation
is successful, and the compiled executable file Core_test.elf can be seen in
the Project Explorer on the left side of the main interface of the GNU Toolchain for ARC Processors, as
shown in the following figure (figure 13).</p>
<p><img alt="figure13" src="../../_images/lab1_figure13.png" /></p>
<ol class="arabic simple" start="5">
<li>Set debugger options</li>
</ol>
<p>Select Debug Configurations from the Run drop-down menu in the toolbar. Then
double-click on C/C++ Application or click on New to get a dialog
similar to the one below (figure 14).</p>
<p><img alt="figure14" src="../../_images/lab1_figure14.png" /></p>
<p>In the figure above, please check if the information in Main tab is correct.
Since we use nSIM simulator to simulate EMSK, we need to modify the settings
in tabs of Debugger, Common, and Terminal (this is because nSIM
cannot be called directly in GNU IDE. Still need GDB Server for indirect
calls). The specific settings are as follows:</p>
<ul class="simple">
<li>Set Debugger-&gt;Gdbsrever Settings</li>
</ul>
<p><img alt="figure15" src="../../_images/lab1_figure15.png" /></p>
<p>As shown in the above figure (figure 15), ARC GDB Server should select nSIM. At this time, the port number default setting is 49105. It is important to check the Use TCF. Otherwise, the nSIM cannot work normally. The TCF boot file is under <em>nSIM/nSIM/etc/tcf/templates</em> (the default installation path). If you have downloaded the Metaware IDE, its own nSIM path is <em>C:/ARC/nSIM/nSIM/etc/tcf/templates</em>, and you can select a TCF file in this folder (depending on the version of the board you are simulating and the kernel model), as shown above.</p>
<ul class="simple">
<li>Pay attention to Debug in Common (figure 16)</li>
</ul>
<p><img alt="figure16" src="../../_images/lab1_figure16.png" /></p>
<ul class="simple">
<li>Terminal settings</li>
</ul>
<p>If you are using the EMSK, the terminal will automatically select the correct port number, and we are using the emulator without a port, so uncheck it, as show below (figure 17).</p>
<p><img alt="figure17" src="../../_images/lab1_figure17.png" /></p>
<p>After all settings are complete, click Debug to enter the debugging pespective.</p>
<ol class="arabic simple" start="6">
<li>Debug executable file core_test.elf</li>
</ol>
<p>First, select the needed debug window in the pull-down menu Debugger in the
toolbar in this debugger view, such as source code window, assembly code
window, register window, global variable window, breakpoint window, function
window, etc., as shown in the following figure (figure 18).</p>
<p><img alt="figure18" src="../../_images/lab1_figure18.png" /></p>
<p>In C source code window, right-click the code line number on the left side of the
window, select Toggle Breakpoint in the pop-up menu or double-click the line
number to set a breakpoint on the current line. In the assembly code window,
double-click a line of code to set a breakpoint on the current line.</p>
<p>Once the breakpoint is set, click the icon <img alt="icon17" src="../../_images/lab1_icon17.png" /> to run the program. After
that, the program will run directly to the nearest breakpoint. At this point,
you can observe the current program execution and the relevant status
information of the processor through the various windows called in the
previous step. If you want to know more about the details of program execution
and the instruction behavior of the processor, you can use the following three
execution commands <img alt="icon18" src="../../_images/lab1_icon18.png" /> to perform single-step debugging. The icon
<img alt="icon19" src="../../_images/lab1_icon19.png" /> can choose to step through a C language statement or an assembly
instruction to match the status information of each window and it is very
convenient for program debugging. If you want to end the current debugging
process, click the icon <img alt="icon20" src="../../_images/lab1_icon20.png" /> . If you want to return to the IDE main page,
click C/C++ in the upper right corner icon <img alt="icon21" src="../../_images/lab1_icon21.png" /> .</p>
<ol class="arabic simple" start="7">
<li>Code performance analysis using the debugger</li>
</ol>
<p>Same as the code performance analysis method of MetaWare Development Toolkit. For details, please refer to the first part of Lab 1.</p>
<p>For the use of these two IDEs, you can refer to the Help documentation in the respective IDE, or you can view the on-line documentation provided by Synopsys.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lab2.html" class="btn btn-neutral float-right" title="How to use embARC OSP" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../level1.html" class="btn btn-neutral" title="Level 1 Labs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Synopsys

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>